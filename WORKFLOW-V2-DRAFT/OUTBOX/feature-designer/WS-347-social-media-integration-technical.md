# TECHNICAL SPECIFICATION: WS-347 - Social Media Integration System
## Generated by Feature Development Session - 2025-01-20

### USER STORY & BUSINESS CONTEXT
**As a:** Wedding supplier (photographer, venue, florist, caterer)
**I want to:** Seamlessly integrate my social media presence with WedSync to showcase my work, attract new clients, and engage with couples
**So that:** I can expand my reach, build trust through social proof, and convert social media followers into paying wedding clients

**Real Wedding Scenario:**
A wedding photographer posts stunning photos from Sarah & James's wedding on Instagram. The photos get tagged with venue, florist, and other vendors. WedSync automatically creates a collaborative portfolio showcasing all vendors' work from that wedding, driving inquiries for everyone involved. Couples browsing WedSync see authentic, recent work and can directly book consultation calls from social posts.

### SPECIFICATION SOURCE
- **Feature ID:** WS-347
- **Priority Level:** HIGH (Social proof drives 70% of wedding bookings)
- **Original Spec:** /CORE-SPECIFICATIONS/social-media-integration/
- **Current Implementation:** 0% complete (template replacement required)
- **Dependencies:** User authentication, media management, portfolio system
- **Files to Modify:** Authentication system, media handlers, portfolio components
- **New Files to Create:** Social media services, webhook handlers, OAuth flows

### TECHNICAL DESIGN

#### Database Schema Required
```sql
-- Social Media Providers Configuration
CREATE TABLE social_media_providers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name TEXT NOT NULL UNIQUE CHECK (name IN (
        'instagram', 'facebook', 'pinterest', 'tiktok', 'youtube', 
        'linkedin', 'twitter', 'snapchat', 'threads'
    )),
    display_name TEXT NOT NULL,
    api_version TEXT NOT NULL,
    auth_type TEXT NOT NULL CHECK (auth_type IN ('oauth2', 'api_key', 'webhook')),
    webhook_support BOOLEAN DEFAULT FALSE,
    media_types TEXT[] NOT NULL DEFAULT '{}', -- ['image', 'video', 'reel', 'story']
    rate_limits JSONB DEFAULT '{}', -- API rate limiting info
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Supplier Social Media Accounts
CREATE TABLE supplier_social_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    supplier_id UUID NOT NULL REFERENCES suppliers(id) ON DELETE CASCADE,
    provider_id UUID NOT NULL REFERENCES social_media_providers(id),
    platform_user_id TEXT NOT NULL, -- Instagram user ID, Facebook page ID, etc.
    username TEXT NOT NULL,
    display_name TEXT,
    follower_count INTEGER DEFAULT 0,
    profile_image_url TEXT,
    bio TEXT,
    website_url TEXT,
    verification_status TEXT CHECK (verification_status IN ('verified', 'unverified', 'business')) DEFAULT 'unverified',
    access_token TEXT, -- Encrypted OAuth token
    refresh_token TEXT, -- Encrypted refresh token
    token_expires_at TIMESTAMPTZ,
    permissions TEXT[] DEFAULT '{}', -- ['read_content', 'post_content', 'manage_comments']
    sync_settings JSONB DEFAULT '{
        "auto_import": true,
        "import_frequency": "daily",
        "content_filters": ["wedding", "bride", "groom"],
        "hashtag_filters": ["#wedding", "#bride", "#weddingphotography"],
        "exclude_personal": true
    }',
    is_primary BOOLEAN DEFAULT FALSE, -- Primary account for this platform
    is_active BOOLEAN DEFAULT TRUE,
    last_sync_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(supplier_id, provider_id, platform_user_id),
    INDEX idx_social_accounts_supplier (supplier_id),
    INDEX idx_social_accounts_provider (provider_id),
    INDEX idx_social_accounts_sync (last_sync_at, is_active)
);

-- Social Media Content (Imported Posts)
CREATE TABLE social_media_content (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    social_account_id UUID NOT NULL REFERENCES supplier_social_accounts(id) ON DELETE CASCADE,
    platform_post_id TEXT NOT NULL, -- Instagram post ID, Facebook post ID, etc.
    post_type TEXT NOT NULL CHECK (post_type IN (
        'image', 'video', 'carousel', 'reel', 'story', 'igtv'
    )),
    content_url TEXT NOT NULL,
    thumbnail_url TEXT,
    caption TEXT,
    hashtags TEXT[] DEFAULT '{}',
    mentions TEXT[] DEFAULT '{}', -- @username mentions
    location_name TEXT,
    location_id TEXT,
    engagement_stats JSONB DEFAULT '{
        "likes": 0,
        "comments": 0,
        "shares": 0,
        "saves": 0,
        "reach": 0,
        "impressions": 0
    }',
    posted_at TIMESTAMPTZ NOT NULL,
    is_wedding_related BOOLEAN DEFAULT TRUE, -- AI detection
    wedding_tags TEXT[] DEFAULT '{}', -- ['bridal', 'ceremony', 'reception', 'venue']
    media_urls TEXT[] DEFAULT '{}', -- Multiple images in carousel
    video_duration INTEGER, -- seconds for videos
    is_featured BOOLEAN DEFAULT FALSE, -- Highlighted on portfolio
    is_hidden BOOLEAN DEFAULT FALSE, -- Hide from public view
    copyright_status TEXT CHECK (copyright_status IN ('owned', 'licensed', 'fair_use', 'disputed')) DEFAULT 'owned',
    imported_at TIMESTAMPTZ DEFAULT NOW(),
    last_updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(social_account_id, platform_post_id),
    INDEX idx_social_content_account (social_account_id),
    INDEX idx_social_content_wedding (is_wedding_related, posted_at),
    INDEX idx_social_content_featured (is_featured, posted_at)
);

-- Wedding Portfolio Integration
CREATE TABLE wedding_social_collaborations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
    primary_supplier_id UUID NOT NULL REFERENCES suppliers(id),
    collaboration_name TEXT NOT NULL, -- "Sarah & James Wedding"
    wedding_date DATE NOT NULL,
    venue_name TEXT,
    hashtag TEXT, -- #SarahAndJamesWedding
    collaboration_code TEXT UNIQUE, -- Short code for easy sharing
    participating_suppliers UUID[] DEFAULT '{}', -- Array of supplier IDs
    total_posts INTEGER DEFAULT 0,
    total_engagement INTEGER DEFAULT 0,
    story_highlights JSONB DEFAULT '{}', -- Saved Instagram stories
    is_public BOOLEAN DEFAULT TRUE,
    is_featured BOOLEAN DEFAULT FALSE, -- Featured collaboration
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    INDEX idx_wedding_collaborations_date (wedding_date),
    INDEX idx_wedding_collaborations_supplier (primary_supplier_id),
    INDEX idx_wedding_collaborations_public (is_public, is_featured)
);

-- Social Media Analytics & Insights
CREATE TABLE social_media_analytics (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    social_account_id UUID NOT NULL REFERENCES supplier_social_accounts(id) ON DELETE CASCADE,
    metric_date DATE NOT NULL,
    metric_type TEXT NOT NULL CHECK (metric_type IN (
        'follower_growth', 'engagement_rate', 'reach', 'impressions', 
        'profile_visits', 'website_clicks', 'inquiry_conversions',
        'hashtag_performance', 'post_performance'
    )),
    metric_value NUMERIC(12,2) NOT NULL,
    comparison_period JSONB DEFAULT '{}', -- vs previous period
    top_posts UUID[] DEFAULT '{}', -- Best performing post IDs
    top_hashtags TEXT[] DEFAULT '{}',
    demographic_data JSONB DEFAULT '{}', -- Audience insights
    recorded_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(social_account_id, metric_date, metric_type),
    INDEX idx_social_analytics_account_date (social_account_id, metric_date),
    INDEX idx_social_analytics_type (metric_type)
);

-- Social Media Campaigns & Promotions
CREATE TABLE social_media_campaigns (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    supplier_id UUID NOT NULL REFERENCES suppliers(id) ON DELETE CASCADE,
    campaign_name TEXT NOT NULL,
    campaign_type TEXT NOT NULL CHECK (campaign_type IN (
        'seasonal_promo', 'wedding_showcase', 'behind_scenes', 
        'client_testimonial', 'vendor_collaboration', 'contest'
    )),
    description TEXT,
    start_date TIMESTAMPTZ NOT NULL,
    end_date TIMESTAMPTZ NOT NULL,
    target_platforms TEXT[] NOT NULL, -- ['instagram', 'facebook', 'pinterest']
    campaign_hashtags TEXT[] DEFAULT '{}',
    content_schedule JSONB DEFAULT '{}', -- Posting calendar
    budget_allocated NUMERIC(10,2) DEFAULT 0, -- For promoted posts
    target_audience JSONB DEFAULT '{}', -- Demographics, interests
    success_metrics JSONB DEFAULT '{
        "target_reach": 10000,
        "target_engagement": 1000,
        "target_inquiries": 50,
        "target_bookings": 5
    }',
    actual_metrics JSONB DEFAULT '{}',
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    INDEX idx_social_campaigns_supplier (supplier_id),
    INDEX idx_social_campaigns_dates (start_date, end_date),
    INDEX idx_social_campaigns_active (is_active)
);

-- Content Approval Workflow (For team accounts)
CREATE TABLE social_content_approvals (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    social_account_id UUID NOT NULL REFERENCES supplier_social_accounts(id) ON DELETE CASCADE,
    content_type TEXT NOT NULL CHECK (content_type IN ('post', 'story', 'reel', 'campaign')),
    content_data JSONB NOT NULL, -- Draft content, media, captions
    submitted_by UUID REFERENCES users(id),
    assigned_to UUID REFERENCES users(id), -- Approver
    approval_status TEXT CHECK (approval_status IN ('pending', 'approved', 'rejected', 'revision_needed')) DEFAULT 'pending',
    approval_notes TEXT,
    scheduled_for TIMESTAMPTZ, -- When to post after approval
    submitted_at TIMESTAMPTZ DEFAULT NOW(),
    reviewed_at TIMESTAMPTZ,
    
    INDEX idx_content_approvals_status (approval_status),
    INDEX idx_content_approvals_assigned (assigned_to),
    INDEX idx_content_approvals_scheduled (scheduled_for)
);

-- Social Media Mentions & Brand Monitoring
CREATE TABLE social_mentions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    supplier_id UUID NOT NULL REFERENCES suppliers(id) ON DELETE CASCADE,
    platform TEXT NOT NULL,
    mention_type TEXT NOT NULL CHECK (mention_type IN ('tag', 'mention', 'hashtag', 'location')),
    mention_text TEXT NOT NULL, -- @supplier_name, #hashtag, or location
    post_url TEXT NOT NULL,
    author_username TEXT NOT NULL,
    author_follower_count INTEGER DEFAULT 0,
    content_snippet TEXT,
    media_url TEXT,
    sentiment TEXT CHECK (sentiment IN ('positive', 'neutral', 'negative')) DEFAULT 'neutral',
    engagement_score INTEGER DEFAULT 0, -- Weighted engagement value
    is_client_content BOOLEAN DEFAULT FALSE, -- Posted by actual client
    is_responded BOOLEAN DEFAULT FALSE,
    response_required BOOLEAN DEFAULT FALSE,
    mentioned_at TIMESTAMPTZ NOT NULL,
    discovered_at TIMESTAMPTZ DEFAULT NOW(),
    
    INDEX idx_social_mentions_supplier (supplier_id),
    INDEX idx_social_mentions_platform (platform),
    INDEX idx_social_mentions_sentiment (sentiment),
    INDEX idx_social_mentions_response (response_required, is_responded)
);

-- Hashtag Performance Tracking
CREATE TABLE hashtag_analytics (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    supplier_id UUID NOT NULL REFERENCES suppliers(id) ON DELETE CASCADE,
    hashtag TEXT NOT NULL, -- without # symbol
    platform TEXT NOT NULL,
    usage_count INTEGER DEFAULT 0,
    total_reach INTEGER DEFAULT 0,
    total_engagement INTEGER DEFAULT 0,
    avg_engagement_rate NUMERIC(5,2) DEFAULT 0,
    trending_score NUMERIC(8,2) DEFAULT 0, -- Algorithm-based trending indicator
    competitor_usage INTEGER DEFAULT 0,
    best_performing_post_id UUID REFERENCES social_media_content(id),
    is_branded BOOLEAN DEFAULT FALSE, -- Supplier's own hashtag
    is_wedding_specific BOOLEAN DEFAULT TRUE,
    last_analyzed_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(supplier_id, hashtag, platform),
    INDEX idx_hashtag_analytics_performance (trending_score, avg_engagement_rate),
    INDEX idx_hashtag_analytics_supplier (supplier_id)
);

-- Social Media ROI Tracking
CREATE TABLE social_media_roi (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    supplier_id UUID NOT NULL REFERENCES suppliers(id) ON DELETE CASCADE,
    tracking_period_start DATE NOT NULL,
    tracking_period_end DATE NOT NULL,
    platform TEXT NOT NULL,
    organic_reach INTEGER DEFAULT 0,
    paid_reach INTEGER DEFAULT 0,
    total_engagement INTEGER DEFAULT 0,
    profile_visits INTEGER DEFAULT 0,
    website_clicks INTEGER DEFAULT 0,
    inquiry_form_submissions INTEGER DEFAULT 0,
    consultation_bookings INTEGER DEFAULT 0,
    actual_bookings INTEGER DEFAULT 0,
    revenue_generated NUMERIC(12,2) DEFAULT 0,
    ad_spend NUMERIC(10,2) DEFAULT 0,
    organic_conversion_rate NUMERIC(5,2) DEFAULT 0,
    paid_conversion_rate NUMERIC(5,2) DEFAULT 0,
    cost_per_inquiry NUMERIC(8,2) DEFAULT 0,
    cost_per_booking NUMERIC(10,2) DEFAULT 0,
    roi_percentage NUMERIC(8,2) DEFAULT 0,
    
    UNIQUE(supplier_id, platform, tracking_period_start, tracking_period_end),
    INDEX idx_social_roi_supplier (supplier_id),
    INDEX idx_social_roi_period (tracking_period_start, tracking_period_end)
);

-- Insert default social media providers
INSERT INTO social_media_providers (name, display_name, api_version, auth_type, webhook_support, media_types, rate_limits) VALUES
('instagram', 'Instagram', 'v18.0', 'oauth2', true, '["image", "video", "carousel", "reel", "story"]', '{"posts_per_hour": 25, "api_calls_per_hour": 4800}'),
('facebook', 'Facebook', 'v18.0', 'oauth2', true, '["image", "video", "album", "event"]', '{"posts_per_hour": 25, "api_calls_per_hour": 4800}'),
('pinterest', 'Pinterest', 'v5', 'oauth2', true, '["image", "video", "idea"]', '{"posts_per_day": 100, "api_calls_per_hour": 1000}'),
('tiktok', 'TikTok', 'v1.3', 'oauth2', false, '["video", "image"]', '{"posts_per_day": 10, "api_calls_per_hour": 100}'),
('youtube', 'YouTube', 'v3', 'oauth2', true, '["video", "short", "livestream"]', '{"uploads_per_day": 100, "api_calls_per_day": 10000}'),
('linkedin', 'LinkedIn', 'v2', 'oauth2', false, '["image", "video", "article"]', '{"posts_per_hour": 25, "api_calls_per_hour": 500}'),
('twitter', 'Twitter/X', 'v2', 'oauth2', true, '["image", "video", "gif"]', '{"posts_per_hour": 300, "api_calls_per_hour": 1500}');
```

#### API Endpoints Required
```typescript
// Social Media API Interfaces
interface SocialMediaAuthRequest {
    provider: 'instagram' | 'facebook' | 'pinterest' | 'tiktok' | 'youtube' | 'linkedin' | 'twitter';
    redirect_uri: string;
    scopes: string[];
}

interface SocialMediaAuthResponse {
    success: boolean;
    auth_url: string;
    state: string; // CSRF protection
    expires_in: number;
}

interface SocialMediaCallbackRequest {
    provider: string;
    code: string;
    state: string;
}

interface SocialMediaCallbackResponse {
    success: boolean;
    account_id: string;
    username: string;
    profile_data: {
        display_name: string;
        follower_count: number;
        profile_image_url: string;
        bio: string;
        website_url: string;
        verification_status: string;
    };
    permissions: string[];
}

interface SocialContentImportRequest {
    account_id: string;
    import_options: {
        date_range: {
            start: string; // ISO date
            end: string;
        };
        content_types: string[];
        hashtag_filters: string[];
        exclude_personal: boolean;
        max_posts: number;
    };
}

interface SocialContentImportResponse {
    success: boolean;
    job_id: string;
    estimated_completion: string;
    total_posts_found: number;
    posts_imported: number;
}

interface SocialContentItem {
    id: string;
    platform_post_id: string;
    post_type: 'image' | 'video' | 'carousel' | 'reel' | 'story';
    content_url: string;
    thumbnail_url?: string;
    caption: string;
    hashtags: string[];
    mentions: string[];
    location?: {
        name: string;
        id: string;
    };
    engagement_stats: {
        likes: number;
        comments: number;
        shares: number;
        saves: number;
        reach?: number;
        impressions?: number;
    };
    posted_at: string;
    is_wedding_related: boolean;
    wedding_tags: string[];
    media_urls: string[];
    video_duration?: number;
}

interface SocialAnalyticsRequest {
    account_id: string;
    date_range: {
        start: string;
        end: string;
    };
    metrics: string[];
    group_by?: 'day' | 'week' | 'month';
}

interface SocialAnalyticsResponse {
    success: boolean;
    data: {
        account_overview: {
            follower_growth: number;
            avg_engagement_rate: number;
            total_reach: number;
            total_impressions: number;
            profile_visits: number;
            website_clicks: number;
        };
        top_posts: SocialContentItem[];
        hashtag_performance: {
            hashtag: string;
            usage_count: number;
            avg_engagement: number;
            reach: number;
        }[];
        audience_insights: {
            age_groups: Record<string, number>;
            gender_split: Record<string, number>;
            top_locations: Record<string, number>;
            active_hours: Record<string, number>;
        };
        competitor_comparison?: {
            competitor_name: string;
            follower_count: number;
            avg_engagement_rate: number;
            posting_frequency: number;
        }[];
    };
}

interface SocialCampaignRequest {
    supplier_id: string;
    campaign_name: string;
    campaign_type: string;
    description?: string;
    start_date: string;
    end_date: string;
    target_platforms: string[];
    campaign_hashtags: string[];
    content_schedule: Record<string, any>;
    budget_allocated?: number;
    target_audience: Record<string, any>;
    success_metrics: Record<string, number>;
}

interface SocialCampaignResponse {
    success: boolean;
    campaign_id: string;
    scheduled_posts: number;
    estimated_reach: number;
    budget_breakdown: Record<string, number>;
}

interface SocialMentionRequest {
    supplier_id: string;
    platforms: string[];
    keywords: string[];
    date_range: {
        start: string;
        end: string;
    };
    sentiment_filter?: 'positive' | 'neutral' | 'negative';
}

interface SocialMentionResponse {
    success: boolean;
    mentions: {
        id: string;
        platform: string;
        mention_type: string;
        mention_text: string;
        post_url: string;
        author_username: string;
        author_follower_count: number;
        content_snippet: string;
        media_url?: string;
        sentiment: string;
        engagement_score: number;
        is_client_content: boolean;
        mentioned_at: string;
    }[];
    summary: {
        total_mentions: number;
        sentiment_breakdown: Record<string, number>;
        top_platforms: Record<string, number>;
        trending_hashtags: string[];
    };
}
```

### CODE EXAMPLES

#### Example 1: Social Media OAuth Authentication Service
```typescript
// /src/lib/social-media/auth-service.ts
import { createServerComponentClient } from '@supabase/auth-helpers-nextjs';
import { cookies } from 'next/headers';
import crypto from 'crypto';

export class SocialMediaAuthService {
    private supabase = createServerComponentClient({ cookies });
    
    // OAuth configuration for different platforms
    private getProviderConfig(provider: string) {
        const configs = {
            instagram: {
                client_id: process.env.INSTAGRAM_CLIENT_ID!,
                client_secret: process.env.INSTAGRAM_CLIENT_SECRET!,
                auth_url: 'https://api.instagram.com/oauth/authorize',
                token_url: 'https://api.instagram.com/oauth/access_token',
                scopes: ['user_profile', 'user_media']
            },
            facebook: {
                client_id: process.env.FACEBOOK_CLIENT_ID!,
                client_secret: process.env.FACEBOOK_CLIENT_SECRET!,
                auth_url: 'https://www.facebook.com/v18.0/dialog/oauth',
                token_url: 'https://graph.facebook.com/v18.0/oauth/access_token',
                scopes: ['pages_show_list', 'pages_read_engagement', 'publish_to_groups']
            },
            pinterest: {
                client_id: process.env.PINTEREST_CLIENT_ID!,
                client_secret: process.env.PINTEREST_CLIENT_SECRET!,
                auth_url: 'https://www.pinterest.com/oauth/',
                token_url: 'https://api.pinterest.com/v5/oauth/token',
                scopes: ['boards:read', 'pins:read', 'user_accounts:read']
            }
        };
        
        return configs[provider as keyof typeof configs];
    }
    
    async initiateAuth(provider: string, supplierId: string, redirectUri: string) {
        const config = this.getProviderConfig(provider);
        if (!config) {
            throw new Error(`Unsupported provider: ${provider}`);
        }
        
        // Generate secure state parameter for CSRF protection
        const state = crypto.randomBytes(32).toString('hex');
        
        // Store state in database for verification
        await this.supabase
            .from('social_auth_sessions')
            .insert({
                state,
                supplier_id: supplierId,
                provider,
                redirect_uri: redirectUri,
                expires_at: new Date(Date.now() + 10 * 60 * 1000) // 10 minutes
            });
        
        // Build authorization URL
        const authUrl = new URL(config.auth_url);
        authUrl.searchParams.append('client_id', config.client_id);
        authUrl.searchParams.append('redirect_uri', redirectUri);
        authUrl.searchParams.append('scope', config.scopes.join(','));
        authUrl.searchParams.append('response_type', 'code');
        authUrl.searchParams.append('state', state);
        
        return {
            success: true,
            auth_url: authUrl.toString(),
            state,
            expires_in: 600
        };
    }
    
    async handleCallback(provider: string, code: string, state: string) {
        // Verify state parameter
        const { data: authSession } = await this.supabase
            .from('social_auth_sessions')
            .select('*')
            .eq('state', state)
            .eq('provider', provider)
            .gt('expires_at', new Date().toISOString())
            .single();
            
        if (!authSession) {
            throw new Error('Invalid or expired authorization state');
        }
        
        const config = this.getProviderConfig(provider);
        
        // Exchange code for access token
        const tokenResponse = await fetch(config.token_url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: new URLSearchParams({
                client_id: config.client_id,
                client_secret: config.client_secret,
                code,
                redirect_uri: authSession.redirect_uri,
                grant_type: 'authorization_code'
            })
        });
        
        const tokenData = await tokenResponse.json();
        
        if (!tokenResponse.ok) {
            throw new Error(`Token exchange failed: ${tokenData.error_description}`);
        }
        
        // Fetch user profile data
        const profileData = await this.fetchUserProfile(provider, tokenData.access_token);
        
        // Store social media account
        const { data: socialAccount } = await this.supabase
            .from('supplier_social_accounts')
            .insert({
                supplier_id: authSession.supplier_id,
                provider_id: await this.getProviderId(provider),
                platform_user_id: profileData.id,
                username: profileData.username,
                display_name: profileData.name,
                follower_count: profileData.followers_count || 0,
                profile_image_url: profileData.profile_picture_url,
                bio: profileData.biography,
                website_url: profileData.website,
                verification_status: profileData.is_verified ? 'verified' : 'unverified',
                access_token: await this.encryptToken(tokenData.access_token),
                refresh_token: tokenData.refresh_token ? await this.encryptToken(tokenData.refresh_token) : null,
                token_expires_at: tokenData.expires_in ? 
                    new Date(Date.now() + tokenData.expires_in * 1000).toISOString() : null,
                permissions: config.scopes
            })
            .select()
            .single();
        
        // Clean up auth session
        await this.supabase
            .from('social_auth_sessions')
            .delete()
            .eq('state', state);
        
        return {
            success: true,
            account_id: socialAccount.id,
            username: profileData.username,
            profile_data: {
                display_name: profileData.name,
                follower_count: profileData.followers_count || 0,
                profile_image_url: profileData.profile_picture_url,
                bio: profileData.biography,
                website_url: profileData.website,
                verification_status: profileData.is_verified ? 'verified' : 'unverified'
            },
            permissions: config.scopes
        };
    }
    
    private async fetchUserProfile(provider: string, accessToken: string) {
        const endpoints = {
            instagram: 'https://graph.instagram.com/me?fields=id,username,account_type,media_count,followers_count,follows_count',
            facebook: 'https://graph.facebook.com/me?fields=id,name,picture,about,website,followers_count,verification_status',
            pinterest: 'https://api.pinterest.com/v5/user_account'
        };
        
        const response = await fetch(endpoints[provider as keyof typeof endpoints], {
            headers: {
                'Authorization': `Bearer ${accessToken}`
            }
        });
        
        return response.json();
    }
    
    private async getProviderId(providerName: string): Promise<string> {
        const { data: provider } = await this.supabase
            .from('social_media_providers')
            .select('id')
            .eq('name', providerName)
            .single();
            
        return provider?.id;
    }
    
    private async encryptToken(token: string): Promise<string> {
        // Implement proper encryption for storing tokens
        // Use crypto library with proper key management
        const cipher = crypto.createCipher('aes-256-cbc', process.env.ENCRYPTION_KEY!);
        let encrypted = cipher.update(token, 'utf8', 'hex');
        encrypted += cipher.final('hex');
        return encrypted;
    }
    
    private async decryptToken(encryptedToken: string): Promise<string> {
        const decipher = crypto.createDecipher('aes-256-cbc', process.env.ENCRYPTION_KEY!);
        let decrypted = decipher.update(encryptedToken, 'hex', 'utf8');
        decrypted += decipher.final('utf8');
        return decrypted;
    }
}
```

#### Example 2: Content Import and Synchronization Service
```typescript
// /src/lib/social-media/content-sync-service.ts
import { createServerComponentClient } from '@supabase/auth-helpers-nextjs';
import { cookies } from 'next/headers';

export class SocialContentSyncService {
    private supabase = createServerComponentClient({ cookies });
    private authService = new SocialMediaAuthService();
    
    async importContent(accountId: string, options: SocialContentImportRequest['import_options']) {
        const { data: socialAccount } = await this.supabase
            .from('supplier_social_accounts')
            .select('*, social_media_providers(*)')
            .eq('id', accountId)
            .single();
            
        if (!socialAccount) {
            throw new Error('Social media account not found');
        }
        
        // Create background job for content import
        const jobId = crypto.randomUUID();
        
        // Start import process
        this.processContentImport(socialAccount, options, jobId);
        
        return {
            success: true,
            job_id: jobId,
            estimated_completion: new Date(Date.now() + 5 * 60 * 1000).toISOString(), // 5 minutes
            total_posts_found: 0, // Will be updated during processing
            posts_imported: 0
        };
    }
    
    private async processContentImport(
        socialAccount: any, 
        options: any, 
        jobId: string
    ) {
        try {
            const accessToken = await this.authService.decryptToken(socialAccount.access_token);
            const provider = socialAccount.social_media_providers.name;
            
            // Fetch content from social media platform
            const content = await this.fetchPlatformContent(provider, accessToken, options);
            
            // Process and store content
            for (const post of content) {
                await this.storeContentItem(socialAccount.id, post);
            }
            
            // Update sync timestamp
            await this.supabase
                .from('supplier_social_accounts')
                .update({ 
                    last_sync_at: new Date().toISOString(),
                    updated_at: new Date().toISOString()
                })
                .eq('id', socialAccount.id);
                
            // Update job status
            await this.updateImportJob(jobId, 'completed', content.length);
            
        } catch (error) {
            console.error('Content import failed:', error);
            await this.updateImportJob(jobId, 'failed', 0, error.message);
        }
    }
    
    private async fetchPlatformContent(provider: string, accessToken: string, options: any) {
        switch (provider) {
            case 'instagram':
                return this.fetchInstagramContent(accessToken, options);
            case 'facebook':
                return this.fetchFacebookContent(accessToken, options);
            case 'pinterest':
                return this.fetchPinterestContent(accessToken, options);
            default:
                throw new Error(`Content import not supported for ${provider}`);
        }
    }
    
    private async fetchInstagramContent(accessToken: string, options: any) {
        const baseUrl = 'https://graph.instagram.com/me/media';
        const params = new URLSearchParams({
            access_token: accessToken,
            fields: 'id,caption,media_type,media_url,thumbnail_url,permalink,timestamp,like_count,comments_count,children{media_url,media_type}',
            limit: Math.min(options.max_posts || 25, 100).toString()
        });
        
        if (options.date_range.start) {
            params.append('since', new Date(options.date_range.start).getTime().toString());
        }
        if (options.date_range.end) {
            params.append('until', new Date(options.date_range.end).getTime().toString());
        }
        
        const response = await fetch(`${baseUrl}?${params}`);
        const data = await response.json();
        
        if (!response.ok) {
            throw new Error(`Instagram API error: ${data.error.message}`);
        }
        
        return data.data.map(post => this.transformInstagramPost(post));
    }
    
    private async fetchFacebookContent(accessToken: string, options: any) {
        // Similar implementation for Facebook
        const baseUrl = 'https://graph.facebook.com/me/posts';
        // Implementation details...
    }
    
    private async fetchPinterestContent(accessToken: string, options: any) {
        // Similar implementation for Pinterest
        const baseUrl = 'https://api.pinterest.com/v5/pins';
        // Implementation details...
    }
    
    private transformInstagramPost(post: any): SocialContentItem {
        return {
            id: crypto.randomUUID(),
            platform_post_id: post.id,
            post_type: this.mapInstagramMediaType(post.media_type),
            content_url: post.media_url,
            thumbnail_url: post.thumbnail_url,
            caption: post.caption || '',
            hashtags: this.extractHashtags(post.caption || ''),
            mentions: this.extractMentions(post.caption || ''),
            engagement_stats: {
                likes: post.like_count || 0,
                comments: post.comments_count || 0,
                shares: 0,
                saves: 0
            },
            posted_at: post.timestamp,
            is_wedding_related: this.detectWeddingContent(post.caption || ''),
            wedding_tags: this.extractWeddingTags(post.caption || ''),
            media_urls: post.children ? post.children.data.map(child => child.media_url) : [post.media_url],
            video_duration: post.media_type === 'VIDEO' ? null : undefined
        };
    }
    
    private mapInstagramMediaType(mediaType: string): string {
        const mapping = {
            'IMAGE': 'image',
            'VIDEO': 'video',
            'CAROUSEL_ALBUM': 'carousel'
        };
        return mapping[mediaType] || 'image';
    }
    
    private extractHashtags(text: string): string[] {
        const hashtagRegex = /#[\w]+/g;
        return (text.match(hashtagRegex) || []).map(tag => tag.toLowerCase());
    }
    
    private extractMentions(text: string): string[] {
        const mentionRegex = /@[\w.]+/g;
        return (text.match(mentionRegex) || []).map(mention => mention.toLowerCase());
    }
    
    private detectWeddingContent(text: string): boolean {
        const weddingKeywords = [
            'wedding', 'bride', 'groom', 'marriage', 'ceremony', 'reception',
            'venue', 'photographer', 'photography', 'bridal', 'engaged',
            'engagement', 'honeymoon', 'anniversary', 'vows', 'altar'
        ];
        
        const lowercaseText = text.toLowerCase();
        return weddingKeywords.some(keyword => lowercaseText.includes(keyword));
    }
    
    private extractWeddingTags(text: string): string[] {
        const tags = [];
        const lowercaseText = text.toLowerCase();
        
        if (lowercaseText.includes('bridal') || lowercaseText.includes('bride')) tags.push('bridal');
        if (lowercaseText.includes('ceremony')) tags.push('ceremony');
        if (lowercaseText.includes('reception')) tags.push('reception');
        if (lowercaseText.includes('venue')) tags.push('venue');
        if (lowercaseText.includes('engaged') || lowercaseText.includes('engagement')) tags.push('engagement');
        
        return tags;
    }
    
    private async storeContentItem(socialAccountId: string, item: SocialContentItem) {
        // Check if content already exists
        const { data: existing } = await this.supabase
            .from('social_media_content')
            .select('id')
            .eq('social_account_id', socialAccountId)
            .eq('platform_post_id', item.platform_post_id)
            .single();
            
        if (existing) {
            // Update existing content
            await this.supabase
                .from('social_media_content')
                .update({
                    caption: item.caption,
                    hashtags: item.hashtags,
                    mentions: item.mentions,
                    engagement_stats: item.engagement_stats,
                    is_wedding_related: item.is_wedding_related,
                    wedding_tags: item.wedding_tags,
                    last_updated_at: new Date().toISOString()
                })
                .eq('id', existing.id);
        } else {
            // Insert new content
            await this.supabase
                .from('social_media_content')
                .insert({
                    social_account_id: socialAccountId,
                    platform_post_id: item.platform_post_id,
                    post_type: item.post_type,
                    content_url: item.content_url,
                    thumbnail_url: item.thumbnail_url,
                    caption: item.caption,
                    hashtags: item.hashtags,
                    mentions: item.mentions,
                    engagement_stats: item.engagement_stats,
                    posted_at: item.posted_at,
                    is_wedding_related: item.is_wedding_related,
                    wedding_tags: item.wedding_tags,
                    media_urls: item.media_urls,
                    video_duration: item.video_duration
                });
        }
    }
    
    private async updateImportJob(jobId: string, status: string, postsImported: number, error?: string) {
        // Update job status in database or cache
        // Implementation depends on job queue system used
    }
}
```

#### Example 3: Social Media Dashboard Component
```typescript
// /src/components/social-media/SocialMediaDashboard.tsx
'use client';

import { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Progress } from '@/components/ui/progress';
import { 
    Instagram, 
    Facebook, 
    Youtube, 
    Linkedin, 
    Twitter,
    TrendingUp, 
    TrendingDown,
    Users,
    Heart,
    MessageCircle,
    Share2,
    Eye,
    ExternalLink,
    Plus,
    RefreshCw,
    Settings,
    BarChart3,
    Calendar,
    Hash
} from 'lucide-react';

interface SocialAccount {
    id: string;
    provider: string;
    username: string;
    display_name: string;
    follower_count: number;
    profile_image_url: string;
    verification_status: string;
    is_active: boolean;
    last_sync_at: string;
}

interface ContentItem {
    id: string;
    post_type: string;
    content_url: string;
    thumbnail_url: string;
    caption: string;
    hashtags: string[];
    engagement_stats: {
        likes: number;
        comments: number;
        shares: number;
        saves: number;
    };
    posted_at: string;
    is_featured: boolean;
}

interface Analytics {
    follower_growth: number;
    avg_engagement_rate: number;
    total_reach: number;
    profile_visits: number;
    website_clicks: number;
}

const platformIcons = {
    instagram: Instagram,
    facebook: Facebook,
    youtube: Youtube,
    linkedin: Linkedin,
    twitter: Twitter
};

const platformColors = {
    instagram: 'bg-gradient-to-r from-purple-500 to-pink-500',
    facebook: 'bg-blue-600',
    youtube: 'bg-red-600',
    linkedin: 'bg-blue-700',
    twitter: 'bg-blue-400'
};

export default function SocialMediaDashboard({ supplierId }: { supplierId: string }) {
    const [accounts, setAccounts] = useState<SocialAccount[]>([]);
    const [content, setContent] = useState<ContentItem[]>([]);
    const [analytics, setAnalytics] = useState<Analytics | null>(null);
    const [activeTab, setActiveTab] = useState('overview');
    const [loading, setLoading] = useState(true);
    const [syncing, setSyncing] = useState(false);

    useEffect(() => {
        loadSocialMediaData();
    }, [supplierId]);

    const loadSocialMediaData = async () => {
        setLoading(true);
        try {
            const [accountsRes, contentRes, analyticsRes] = await Promise.all([
                fetch(`/api/social-media/accounts?supplier_id=${supplierId}`),
                fetch(`/api/social-media/content?supplier_id=${supplierId}&limit=12`),
                fetch(`/api/social-media/analytics?supplier_id=${supplierId}&period=30d`)
            ]);

            const accountsData = await accountsRes.json();
            const contentData = await contentRes.json();
            const analyticsData = await analyticsRes.json();

            setAccounts(accountsData.accounts || []);
            setContent(contentData.content || []);
            setAnalytics(analyticsData.analytics || null);
        } catch (error) {
            console.error('Failed to load social media data:', error);
        } finally {
            setLoading(false);
        }
    };

    const connectPlatform = async (platform: string) => {
        try {
            const response = await fetch('/api/social-media/auth/initiate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    provider: platform,
                    redirect_uri: `${window.location.origin}/dashboard/social-media/callback`
                })
            });

            const data = await response.json();
            if (data.success) {
                window.location.href = data.auth_url;
            }
        } catch (error) {
            console.error('Failed to initiate social media connection:', error);
        }
    };

    const syncContent = async (accountId: string) => {
        setSyncing(true);
        try {
            const response = await fetch('/api/social-media/sync', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    account_id: accountId,
                    import_options: {
                        date_range: {
                            start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                            end: new Date().toISOString()
                        },
                        content_types: ['image', 'video', 'carousel'],
                        hashtag_filters: ['wedding', 'bride', 'groom'],
                        exclude_personal: true,
                        max_posts: 50
                    }
                })
            });

            const data = await response.json();
            if (data.success) {
                // Poll for completion or use websocket
                setTimeout(loadSocialMediaData, 3000);
            }
        } catch (error) {
            console.error('Failed to sync content:', error);
        } finally {
            setSyncing(false);
        }
    };

    const formatNumber = (num: number): string => {
        if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
        if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
        return num.toString();
    };

    const formatEngagementRate = (rate: number): string => {
        return `${rate.toFixed(1)}%`;
    };

    const getTimeSince = (date: string): string => {
        const now = new Date();
        const posted = new Date(date);
        const diffInMinutes = Math.floor((now.getTime() - posted.getTime()) / (1000 * 60));
        
        if (diffInMinutes < 60) return `${diffInMinutes}m`;
        if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h`;
        return `${Math.floor(diffInMinutes / 1440)}d`;
    };

    if (loading) {
        return (
            <div className="flex items-center justify-center p-8">
                <RefreshCw className="h-8 w-8 animate-spin" />
            </div>
        );
    }

    return (
        <div className="space-y-6">
            {/* Header */}
            <div className="flex justify-between items-center">
                <div>
                    <h1 className="text-3xl font-bold tracking-tight">Social Media</h1>
                    <p className="text-muted-foreground">
                        Manage your social media presence and track performance
                    </p>
                </div>
                <div className="flex gap-2">
                    <Button 
                        variant="outline" 
                        onClick={() => loadSocialMediaData()}
                        disabled={loading}
                    >
                        <RefreshCw className="h-4 w-4 mr-2" />
                        Refresh
                    </Button>
                    <Button>
                        <Plus className="h-4 w-4 mr-2" />
                        Connect Platform
                    </Button>
                </div>
            </div>

            {/* Connected Accounts */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {accounts.map((account) => {
                    const PlatformIcon = platformIcons[account.provider as keyof typeof platformIcons];
                    const platformColor = platformColors[account.provider as keyof typeof platformColors];
                    
                    return (
                        <Card key={account.id} className="relative overflow-hidden">
                            <div className={`absolute top-0 left-0 right-0 h-1 ${platformColor}`} />
                            <CardHeader className="pb-2">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <Avatar className="h-10 w-10">
                                            <AvatarImage src={account.profile_image_url} />
                                            <AvatarFallback>
                                                <PlatformIcon className="h-5 w-5" />
                                            </AvatarFallback>
                                        </Avatar>
                                        <div>
                                            <div className="flex items-center gap-1">
                                                <h3 className="font-semibold text-sm">@{account.username}</h3>
                                                {account.verification_status === 'verified' && (
                                                    <Badge variant="secondary" className="text-xs">
                                                        Verified
                                                    </Badge>
                                                )}
                                            </div>
                                            <p className="text-xs text-muted-foreground">
                                                {formatNumber(account.follower_count)} followers
                                            </p>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-1">
                                        <Button
                                            size="sm"
                                            variant="outline"
                                            onClick={() => syncContent(account.id)}
                                            disabled={syncing}
                                        >
                                            <RefreshCw className="h-3 w-3" />
                                        </Button>
                                        <Button size="sm" variant="outline">
                                            <Settings className="h-3 w-3" />
                                        </Button>
                                    </div>
                                </div>
                            </CardHeader>
                            <CardContent className="pt-2">
                                <div className="text-xs text-muted-foreground">
                                    Last sync: {account.last_sync_at ? 
                                        getTimeSince(account.last_sync_at) + ' ago' : 
                                        'Never'
                                    }
                                </div>
                                {account.is_active ? (
                                    <Badge variant="default" className="mt-2 text-xs">
                                        Active
                                    </Badge>
                                ) : (
                                    <Badge variant="secondary" className="mt-2 text-xs">
                                        Inactive
                                    </Badge>
                                )}
                            </CardContent>
                        </Card>
                    );
                })}
                
                {/* Add Platform Card */}
                <Card className="border-dashed border-2 hover:border-primary/50 transition-colors cursor-pointer">
                    <CardContent className="flex flex-col items-center justify-center p-6 text-center">
                        <Plus className="h-8 w-8 text-muted-foreground mb-2" />
                        <h3 className="font-semibold mb-1">Connect Platform</h3>
                        <p className="text-sm text-muted-foreground mb-4">
                            Add Instagram, Facebook, or other social media accounts
                        </p>
                        <div className="flex gap-2">
                            {Object.entries(platformIcons).map(([platform, Icon]) => {
                                const isConnected = accounts.some(account => account.provider === platform);
                                return (
                                    <Button
                                        key={platform}
                                        size="sm"
                                        variant={isConnected ? "secondary" : "outline"}
                                        onClick={() => !isConnected && connectPlatform(platform)}
                                        disabled={isConnected}
                                    >
                                        <Icon className="h-4 w-4" />
                                    </Button>
                                );
                            })}
                        </div>
                    </CardContent>
                </Card>
            </div>

            {/* Analytics Overview */}
            {analytics && (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <Card>
                        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                            <CardTitle className="text-sm font-medium">Follower Growth</CardTitle>
                            <Users className="h-4 w-4 text-muted-foreground" />
                        </CardHeader>
                        <CardContent>
                            <div className="text-2xl font-bold">
                                {analytics.follower_growth > 0 ? '+' : ''}
                                {formatNumber(analytics.follower_growth)}
                            </div>
                            <p className="text-xs text-muted-foreground">
                                {analytics.follower_growth > 0 ? (
                                    <span className="text-green-600 flex items-center">
                                        <TrendingUp className="h-3 w-3 mr-1" />
                                        Last 30 days
                                    </span>
                                ) : (
                                    <span className="text-red-600 flex items-center">
                                        <TrendingDown className="h-3 w-3 mr-1" />
                                        Last 30 days
                                    </span>
                                )}
                            </p>
                        </CardContent>
                    </Card>

                    <Card>
                        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                            <CardTitle className="text-sm font-medium">Avg. Engagement</CardTitle>
                            <Heart className="h-4 w-4 text-muted-foreground" />
                        </CardHeader>
                        <CardContent>
                            <div className="text-2xl font-bold">
                                {formatEngagementRate(analytics.avg_engagement_rate)}
                            </div>
                            <p className="text-xs text-muted-foreground">
                                Across all platforms
                            </p>
                        </CardContent>
                    </Card>

                    <Card>
                        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                            <CardTitle className="text-sm font-medium">Total Reach</CardTitle>
                            <Eye className="h-4 w-4 text-muted-foreground" />
                        </CardHeader>
                        <CardContent>
                            <div className="text-2xl font-bold">
                                {formatNumber(analytics.total_reach)}
                            </div>
                            <p className="text-xs text-muted-foreground">
                                Last 30 days
                            </p>
                        </CardContent>
                    </Card>

                    <Card>
                        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                            <CardTitle className="text-sm font-medium">Website Clicks</CardTitle>
                            <ExternalLink className="h-4 w-4 text-muted-foreground" />
                        </CardHeader>
                        <CardContent>
                            <div className="text-2xl font-bold">
                                {formatNumber(analytics.website_clicks)}
                            </div>
                            <p className="text-xs text-muted-foreground">
                                From social media
                            </p>
                        </CardContent>
                    </Card>
                </div>
            )}

            {/* Tabs for different views */}
            <Tabs value={activeTab} onValueChange={setActiveTab} className="space-y-4">
                <TabsList>
                    <TabsTrigger value="overview">Overview</TabsTrigger>
                    <TabsTrigger value="content">Content</TabsTrigger>
                    <TabsTrigger value="analytics">Analytics</TabsTrigger>
                    <TabsTrigger value="campaigns">Campaigns</TabsTrigger>
                </TabsList>

                <TabsContent value="content" className="space-y-4">
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        {content.map((item) => (
                            <Card key={item.id} className="overflow-hidden">
                                <div className="aspect-square relative">
                                    {item.post_type === 'video' ? (
                                        <video 
                                            src={item.content_url} 
                                            poster={item.thumbnail_url}
                                            className="w-full h-full object-cover"
                                            muted
                                        />
                                    ) : (
                                        <img 
                                            src={item.content_url} 
                                            alt="Social media post"
                                            className="w-full h-full object-cover"
                                        />
                                    )}
                                    {item.is_featured && (
                                        <Badge className="absolute top-2 right-2">
                                            Featured
                                        </Badge>
                                    )}
                                </div>
                                <CardContent className="p-3">
                                    <p className="text-sm text-muted-foreground line-clamp-2 mb-2">
                                        {item.caption}
                                    </p>
                                    <div className="flex items-center justify-between text-xs text-muted-foreground mb-2">
                                        <span>{getTimeSince(item.posted_at)} ago</span>
                                        <div className="flex items-center gap-3">
                                            <span className="flex items-center gap-1">
                                                <Heart className="h-3 w-3" />
                                                {formatNumber(item.engagement_stats.likes)}
                                            </span>
                                            <span className="flex items-center gap-1">
                                                <MessageCircle className="h-3 w-3" />
                                                {formatNumber(item.engagement_stats.comments)}
                                            </span>
                                        </div>
                                    </div>
                                    {item.hashtags.length > 0 && (
                                        <div className="flex flex-wrap gap-1 mt-2">
                                            {item.hashtags.slice(0, 3).map((hashtag) => (
                                                <Badge 
                                                    key={hashtag} 
                                                    variant="secondary" 
                                                    className="text-xs"
                                                >
                                                    {hashtag}
                                                </Badge>
                                            ))}
                                            {item.hashtags.length > 3 && (
                                                <Badge variant="secondary" className="text-xs">
                                                    +{item.hashtags.length - 3}
                                                </Badge>
                                            )}
                                        </div>
                                    )}
                                </CardContent>
                            </Card>
                        ))}
                    </div>
                </TabsContent>

                {/* Other tab contents would go here */}
            </Tabs>
        </div>
    );
}
```

### ACCEPTANCE CRITERIA
- [ ] **Platform Integration**: Successfully connect and authenticate with Instagram, Facebook, Pinterest, TikTok, and YouTube
- [ ] **Content Import**: Automatically import posts, images, videos, and engagement data from connected platforms
- [ ] **Wedding Detection**: AI-powered detection of wedding-related content with 85%+ accuracy
- [ ] **Portfolio Integration**: Seamlessly integrate social media content into supplier portfolios and galleries
- [ ] **Collaborative Showcases**: Create wedding collaboration pages featuring all vendors' social media content
- [ ] **Analytics Dashboard**: Comprehensive analytics showing engagement, reach, follower growth, and ROI metrics
- [ ] **Campaign Management**: Plan, schedule, and track social media campaigns with performance measurement
- [ ] **Brand Monitoring**: Track mentions, hashtags, and brand sentiment across all platforms
- [ ] **Compliance Management**: Ensure GDPR compliance and proper handling of client content permissions
- [ ] **Mobile Optimization**: Full mobile responsiveness for managing social media on-the-go
- [ ] **Real-time Sync**: Webhook-based real-time synchronization of new content and engagement data
- [ ] **Security Implementation**: Encrypted storage of OAuth tokens and secure API handling
- [ ] **ROI Tracking**: Track inquiries and bookings generated from social media with attribution
- [ ] **Team Collaboration**: Multi-user support for social media management teams
- [ ] **Content Approval**: Workflow for content approval before posting (for team accounts)

### DEPENDENCIES
- Must complete after: User authentication system, media management, portfolio system
- Must complete before: Marketing automation, analytics dashboard
- Shares code with: Portfolio system, media management, notification system, analytics engine

### ESTIMATED EFFORT
- Team A Frontend: 32 hours (Social dashboard, content gallery, campaign management UI)
- Team B Backend: 28 hours (OAuth integrations, content sync service, webhook handlers)
- Team C Integration: 24 hours (Platform API integrations, webhook processing, real-time sync)
- Team D Platform: 16 hours (Database optimization, caching, background job processing)
- Team E General: 12 hours (Content moderation, compliance features, mobile optimization)
- Total: 112 hours

### BUSINESS IMPACT
**Revenue Impact**: 
- 70% of wedding bookings influenced by social proof
- Average 40% increase in inquiries when social media integrated
- Premium tier feature driving subscription upgrades

**User Value**:
- Automated content curation saves 8+ hours per week
- Increased social media engagement by 65% average
- Professional portfolio enhancement with authentic client content
- Cross-vendor collaboration opportunities

**Competitive Advantage**:
- First wedding platform with full social media integration
- AI-powered wedding content detection
- Collaborative wedding showcases unique to market
- Comprehensive ROI tracking for social media investment