# üìè MD FILE VALIDATION RULES
## Comprehensive Rules for Determining MD File Necessity

**Version**: 1.0
**Created**: 2025-01-09
**Authority**: Workflow and Audit Manager

---

## üéØ VALIDATION DECISION TREE

```
START: Is this MD file necessary?
‚îÇ
‚îú‚îÄ> Is it a SYSTEM FILE?
‚îÇ   ‚îú‚îÄ> CLAUDE.md, README.md, LICENSE.md ‚Üí ‚úÖ KEEP (Critical)
‚îÇ   ‚îî‚îÄ> Other system files ‚Üí Continue evaluation
‚îÇ
‚îú‚îÄ> Is it in CORE-SPECIFICATIONS?
‚îÇ   ‚îî‚îÄ> Yes ‚Üí ‚úÖ KEEP (Source of truth)
‚îÇ
‚îú‚îÄ> Is it a WS-XXX feature file?
‚îÇ   ‚îú‚îÄ> Currently in development? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îú‚îÄ> Completed < 30 days ago? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îú‚îÄ> Completed > 30 days ago? ‚Üí üì¶ ARCHIVE
‚îÇ   ‚îî‚îÄ> Abandoned/Cancelled? ‚Üí üóëÔ∏è DELETE
‚îÇ
‚îú‚îÄ> Is it a SESSION LOG?
‚îÇ   ‚îú‚îÄ> < 7 days old? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îú‚îÄ> 7-30 days old? ‚Üí üì¶ ARCHIVE
‚îÇ   ‚îî‚îÄ> > 30 days old? ‚Üí üóëÔ∏è DELETE
‚îÇ
‚îú‚îÄ> Is it DOCUMENTATION?
‚îÇ   ‚îú‚îÄ> Active feature docs? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îú‚îÄ> API/Architecture docs? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îú‚îÄ> Outdated version docs? ‚Üí üì¶ ARCHIVE
‚îÇ   ‚îî‚îÄ> Draft/temporary docs? ‚Üí üóëÔ∏è DELETE
‚îÇ
‚îú‚îÄ> Is it a REPORT/AUDIT?
‚îÇ   ‚îú‚îÄ> Compliance required? ‚Üí üì¶ ARCHIVE
‚îÇ   ‚îú‚îÄ> < 30 days old? ‚Üí ‚úÖ KEEP
‚îÇ   ‚îî‚îÄ> > 30 days old? ‚Üí üóëÔ∏è DELETE
‚îÇ
‚îî‚îÄ> DEFAULT ‚Üí üóëÔ∏è DELETE (When in doubt, remove)
```

---

## üõ°Ô∏è CATEGORY-SPECIFIC RULES

### 1. CRITICAL SYSTEM FILES (NEVER DELETE)
```javascript
const CRITICAL_FILES = [
  'CLAUDE.md',           // Claude configuration
  'README.md',           // Project documentation
  'LICENSE.md',          // Legal requirement
  'CONTRIBUTING.md',     // Contribution guidelines
  'SECURITY.md',         // Security policies
  'CODE_OF_CONDUCT.md',  // Community guidelines
  '.github/*.md',        // GitHub templates
  'CHANGELOG.md',        // Version history
];
```

### 2. WORKFLOW FILES
| File Pattern | Age | Action | Reason |
|-------------|-----|---------|---------|
| `WS-*-assignment.md` | < 30d | KEEP | Active development |
| `WS-*-assignment.md` | > 30d | ARCHIVE | Historical reference |
| `WS-*-technical.md` | < 30d | KEEP | Implementation guide |
| `WS-*-technical.md` | > 30d | ARCHIVE | Completed feature |
| `WS-*-EVIDENCE-*.md` | Any | ARCHIVE | Audit trail |
| `WS-*-team-*.md` | < 7d | KEEP | Active prompts |
| `WS-*-team-*.md` | > 7d | DELETE | Prompts executed |

### 3. SESSION & LOG FILES
| File Pattern | Age | Action | Reason |
|-------------|-----|---------|---------|
| `session-*.md` | < 24h | KEEP | Current session |
| `session-*.md` | 1-7d | KEEP | Recent reference |
| `session-*.md` | 7-30d | ARCHIVE | Historical record |
| `session-*.md` | > 30d | DELETE | No value |
| `*-emergency-*.md` | Any | ARCHIVE | Incident record |
| `*-rollback-*.md` | Any | ARCHIVE | Recovery documentation |

### 4. DOCUMENTATION FILES
| File Type | Validation | Action |
|----------|------------|---------|
| API Documentation | Current version? | KEEP |
| API Documentation | Old version? | ARCHIVE |
| Architecture Docs | Reflects current system? | KEEP |
| Architecture Docs | Outdated design? | ARCHIVE |
| User Guides | Current features? | KEEP |
| User Guides | Deprecated features? | DELETE |
| Draft Documents | Has `-draft` or `-temp`? | DELETE |
| Meeting Notes | < 30 days? | KEEP |
| Meeting Notes | > 30 days? | DELETE |

### 5. EVIDENCE & AUDIT FILES
| File Type | Legal Requirement | Action |
|----------|------------------|---------|
| Evidence Package | Yes | ARCHIVE (7 years) |
| Evidence Package | No | ARCHIVE (1 year) |
| Audit Report | Compliance | ARCHIVE (7 years) |
| Audit Report | Internal | ARCHIVE (90 days) |
| Test Results | Failed tests | KEEP (30 days) |
| Test Results | Passed tests | DELETE (7 days) |

---

## üîç CONTENT-BASED VALIDATION

### Check 1: File Size
```bash
if [[ $(stat -f%z "$file") -lt 100 ]]; then
  # File is likely empty or template only
  VALIDATE_RESULT="DELETE"
fi
```

### Check 2: Template Detection
```bash
# Common template markers that indicate no real content
TEMPLATE_MARKERS=(
  "TODO: Add content"
  "[Insert description here]"
  "This file is intentionally left blank"
  "Generated by"
  "Auto-generated"
)

for marker in "${TEMPLATE_MARKERS[@]}"; do
  if grep -q "$marker" "$file"; then
    VALIDATE_RESULT="DELETE"
  fi
done
```

### Check 3: Duplicate Content
```bash
# Generate MD5 hash
file_hash=$(md5sum "$file" | cut -d' ' -f1)

# Check against known hashes
if exists_in_hash_db "$file_hash"; then
  # Keep newest, delete this one
  VALIDATE_RESULT="DELETE"
else
  add_to_hash_db "$file_hash" "$file"
fi
```

### Check 4: Referenced in Code
```bash
# Check if MD file is referenced anywhere
references=$(grep -r "$(basename $file)" --include="*.ts" --include="*.tsx" --include="*.js" | wc -l)

if [[ $references -gt 0 ]]; then
  VALIDATE_RESULT="KEEP"  # File is actively used
fi
```

---

## üìã QUICK VALIDATION CHECKLIST

For each MD file, ask:

### Essential Questions
- [ ] Is this file referenced in code or other documentation?
- [ ] Does it contain unique, non-template content?
- [ ] Is it less than 30 days old?
- [ ] Is it required for compliance or legal purposes?
- [ ] Does it document current system behavior?

**If ANY answer is YES ‚Üí Consider KEEPING**

### Deletion Indicators
- [ ] File is empty or contains only template text?
- [ ] Duplicate of another file?
- [ ] Related to cancelled/abandoned feature?
- [ ] Session log older than 7 days?
- [ ] Auto-generated report older than 30 days?
- [ ] Draft or temporary file?

**If ANY answer is YES ‚Üí Consider DELETING**

---

## üö¶ VALIDATION WORKFLOW

### Step 1: Automated Pre-Validation
```bash
./validate-md-files.sh --auto
```
- Checks file size, age, duplicates
- Generates initial categorization
- Flags edge cases for manual review

### Step 2: Manual Review Queue
Files requiring human decision:
- Files between 20-35 days old
- Files with mixed signals (old but referenced)
- Files in ambiguous directories
- Files with business-critical names

### Step 3: Final Validation
```bash
./validate-md-files.sh --confirm
```
- Reviews manual decisions
- Applies validation rules
- Generates action list

---

## üìä VALIDATION METRICS

Track validation effectiveness:

| Metric | Target | Actual |
|--------|--------|---------|
| False Positives (kept but shouldn't) | < 5% | - |
| False Negatives (deleted but needed) | 0% | - |
| Processing Time | < 2 hrs | - |
| Space Recovered | > 60% | - |
| Files Validated | 100% | - |

---

## ‚ö†Ô∏è SPECIAL CASES

### Never Delete Without Confirmation
1. Files containing credentials or secrets (move to secure location)
2. Files with legal disclaimers or agreements
3. Files referenced in production code
4. Files with signatures or approvals
5. Files linked from external systems

### Always Archive Instead of Delete
1. Incident reports
2. Security audits
3. Compliance documentation
4. Financial records
5. User data or feedback

### Requires Manager Approval
1. Deleting > 100 files at once
2. Deleting files from CORE-SPECIFICATIONS
3. Deleting files from .github
4. Deleting any LICENSE or SECURITY files

---

## üîÑ VALIDATION FREQUENCY

| File Type | Validation Frequency |
|-----------|---------------------|
| Session Logs | Daily |
| Workflow Files | Weekly |
| Documentation | Monthly |
| Archives | Quarterly |
| System Files | Never (protected) |

---

## üìù VALIDATION LOG FORMAT

```json
{
  "timestamp": "2025-01-09T10:00:00Z",
  "file": "/path/to/file.md",
  "validation_result": "DELETE|KEEP|ARCHIVE",
  "reason": "File age > 30 days, no references",
  "validator": "automated|manual",
  "confidence": 0.95,
  "action_taken": "moved_to_trash",
  "recovery_path": "/TRASH-MD-FILES-20250109/file.md"
}
```

---

## ‚úÖ APPROVAL MATRIX

| Action | File Count | Approval Required |
|--------|------------|-------------------|
| DELETE | < 10 | Automated OK |
| DELETE | 10-50 | Team Lead |
| DELETE | 50-100 | Manager |
| DELETE | > 100 | Director |
| ARCHIVE | Any | Automated OK |
| MODIFY | Any | Manual Review |

---

**Remember**: When in doubt, ARCHIVE don't DELETE. Storage is cheap, lost data is expensive.