# TECHNICAL SPECIFICATION: WS-158 - Task Categories
## Generated by Feature Development Session - August 23, 2025

### USER STORY & BUSINESS CONTEXT (THINK HARD - BE FACTUAL)
**As a:** Wedding couple organizing tasks by workflow stage
**I want to:** Categorize tasks by wedding phase (setup, ceremony, reception, breakdown) with color coding
**So that:** Helpers can focus on their assigned phase and understand task priorities within context

### SPECIFICATION SOURCE
- **Feature ID:** WS-158
- **Original Spec:** /CORE-SPECIFICATIONS/03-WEDME-COUPLE-PLATFORM/05-Task-Delegation/03-task-categories md.md

### TECHNICAL DESIGN

#### Database Schema Required
```sql
-- Extend wedding_tasks table from WS-156
ALTER TABLE wedding_tasks ADD COLUMN IF NOT EXISTS category_color VARCHAR(7);
ALTER TABLE wedding_tasks ADD COLUMN IF NOT EXISTS category_icon VARCHAR(10);

CREATE TABLE IF NOT EXISTS task_category_templates (
  category VARCHAR(50) PRIMARY KEY,
  display_name VARCHAR(100),
  color VARCHAR(7),
  icon VARCHAR(10),
  typical_timing VARCHAR(50), -- e.g., "pre-ceremony", "during-reception"
  common_tasks JSONB -- Array of common task examples
);

INSERT INTO task_category_templates VALUES
('setup', 'Setup & Preparation', '#3B82F6', 'ðŸ”§', 'pre-ceremony', '["Arrange ceremony chairs", "Set up sound system", "Place welcome signs"]'),
('ceremony', 'Ceremony', '#10B981', 'ðŸ’’', 'ceremony-time', '["Ring bearer coordination", "Guest seating", "Music cues"]'),
('reception', 'Reception', '#F59E0B', 'ðŸŽ‰', 'post-ceremony', '["Table setup", "Bar preparation", "Dance floor ready"]'),
('breakdown', 'Cleanup & Breakdown', '#EF4444', 'ðŸ“¦', 'post-reception', '["Pack decorations", "Gift collection", "Venue cleanup"]'),
('coordination', 'Event Coordination', '#8B5CF6', 'ðŸ“‹', 'ongoing', '["Guest management", "Vendor coordination", "Timeline management"]');
```

### CODE EXAMPLES

```typescript
export function TaskCategories({ coupleId }: { coupleId: string }) {
  const [categories, setCategories] = useState<TaskCategory[]>([]);
  const [tasksByCategory, setTasksByCategory] = useState<Record<string, Task[]>>({});

  const updateTaskCategory = async (taskId: string, newCategory: string) => {
    const { error } = await supabase
      .from('wedding_tasks')
      .update({ 
        category: newCategory,
        category_color: getCategoryColor(newCategory),
        category_icon: getCategoryIcon(newCategory)
      })
      .eq('id', taskId);
  };

  return (
    <div className="task-categories">
      <h2>Task Categories</h2>
      {Object.entries(tasksByCategory).map(([category, tasks]) => (
        <div key={category} className="category-section">
          <h3>{category} ({tasks.length} tasks)</h3>
          {/* Task list for category */}
        </div>
      ))}
    </div>
  );
}
```

### ACCEPTANCE CRITERIA
- [x] Color-coded task categories with icons
- [x] Drag-and-drop between categories
- [x] Category-based task filtering and views
- [x] Timeline integration showing tasks by phase
- [x] Helper assignment by category preferences

### DEPENDENCIES
- Must complete after: WS-156 (Task Creation)
- Estimated Effort: 28 hours total