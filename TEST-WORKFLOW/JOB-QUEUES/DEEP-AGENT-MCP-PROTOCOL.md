# 🧠 DEEP AGENT MCP PROTOCOL - MANDATORY INSTRUCTIONS

## 🚨 CRITICAL: NO MORE WEB SEARCHES!

### ❌ DO NOT DO THIS:
```
Web Search("JavaScript TypeScript test refactoring...")
```

### ✅ DO THIS INSTEAD:
```
🔍 Using Ref MCP for TypeScript documentation...
📚 Ref MCP: Searching TypeScript refactoring patterns
📖 Found official TypeScript complexity reduction guides
```

## 🧠 MANDATORY MCP WORKFLOW FOR ALL DEEP JOBS:

### Step 1: 📚 ALWAYS USE REF MCP FIRST
Instead of web search, use Ref MCP:
- ✅ "Using Ref MCP to research [technology] patterns"
- ✅ "Ref MCP: Found official [framework] documentation"
- ✅ "Ref MCP: Located best practices for [issue type]"

### Step 2: 🤖 DEPLOY SUB-AGENTS WITH TASK TOOL
Use the Task tool with subagent_type:
```
Task({ 
  subagent_type: 'general-purpose',
  prompt: 'Architecture review for complex nesting issue in [file]',
  description: 'Review cognitive complexity refactoring'
})
```

### Step 3: 🧪 USE COMPREHENSIVE VERIFICATION
- ✅ Apply fixes based on Ref MCP documentation
- ✅ Get sub-agent approval before committing
- ✅ Document architectural decisions

## 🎯 EXAMPLE CORRECT WORKFLOW:

```
🔍 Analyzing complex nesting issue...
📚 Using Ref MCP to research TypeScript complexity patterns
✅ Ref MCP: Found official TypeScript refactoring guidelines

🤖 Deploying architecture reviewer sub-agent:
Task({ 
  subagent_type: 'general-purpose',
  prompt: 'Review cognitive complexity refactoring for viral analytics'
})

🛠️ Applying refactoring based on Ref MCP guidelines:
- Extract nested callbacks to separate functions
- Reduce cognitive complexity from 17 to 12
- Apply TypeScript best practices from official docs

✅ Sub-agent approval received
✅ Comprehensive verification complete
✅ Ready for commit
```

## 🚫 NEVER AGAIN:
- Web searches for documentation
- Random website references  
- Skipping sub-agent deployment
- Basic verification for complex issues

## ✅ ALWAYS:
- Use Ref MCP for official documentation
- Deploy required sub-agents
- Follow comprehensive verification
- Document decisions
